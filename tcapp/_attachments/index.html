<!doctype html>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <!-- Optional DataView polyfill for Firefox, hard to tell when it will be
    natively supported. Hear IE 10 may support, no ability to check
    <script src="https://raw.github.com/davidflanagan/DataView.js/master/DataView.js"></script>
     -->
    <!--
    <script src="https://raw.github.com/bvmou/wkmap/wkmap.js"></script>
    -->
    <script src="ukmap.js"></script>
    <style>
      body { background: rgba(11,11,11,.4); }
    </style>
  </head>
  
  <body> 

  <div style=position:absolute; id=mapdiv></div>

<script>

  // Example of storing results in a couchdb with urls like
  // db/doc/attachment-Z-X-Y.wkb
  
  function provider(baseUrl) {
    function couchProvider (arr) { 
      return baseUrl + arr.slice(0,3).join('-') + '.ukb' 
    }
    return couchProvider
  }

  document.addEventListener("DOMContentLoaded", function (evt) {
    //      A base url from which Z/X/Y.wkb are pulled     abbrev/id    container
    // base url here is pwd because the tiles are couchdb attachments same as html/js
    wkmap ( false, provider('/ukbt/_design/ukbtest/'), 'streets', '#mapdiv') 
    // example of canvasback behind couchdb proxy:
    //wkmap(false, provider('/_canvasback/tms/'), 'streets', '#mapdiv')
    //wkmap(false, provider('/osmwkb/_design/osmflowers/'), 'flowers', '#mapdiv')
  })

</script>
